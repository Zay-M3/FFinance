{% load static %}
<form id="activeForm" action="{% url 'home' %}" method="post" class="h-100">
    {% csrf_token %}
    <div class="finance-card card h-100">
        <div class="card-body d-flex flex-column">
            <h2 class="card-title">Activos</h2>
            <h6 class="card-subtitle mb-3 text-muted">Selecciona tu activo</h6>
            <p class="text-secondary mb-3">Aquí puedes seleccionar tu activo y objetivo para análisis</p>

            <div class="mb-3">
                <select class="form-select finance-form-select" name="simbolActive" id="select">
                    <option selected>Select your active</option>
                    <option value="BTC-USD">BitCoin</option>
                    <option value="TSLA">Tesla</option>
                    <option value="AMZN">Amazon</option>
                    <option value="TLSA">Tiziana</option>
                    <option value="GOOG">Google Alphabet</option>
                    <option value="AAPL">Apple</option>
                </select>
            </div>

            <label class="form-label fw-medium mb-2">Selecciona tu objetivo</label>
            <div class="range-slider-container mb-3">
                <span>0</span>
                <input type="range" name="objetiveActive" class="form-range range-slider" min="0" max="1000000" id="customRange1" value="0" oninput="updateValue(this.value)">
                <span id="rangeValue">0</span>
            </div>
            
            <div class="mb-3">
                <label for="objetiveActive" class="form-label text-secondary small">Objetivo</label>
                <input type="text" class="form-control" name="objetiveActive" id="myInput" placeholder="Ingresa tu objetivo aquí..." oninput="changeSpan()">
            </div>

            <div class="mt-auto">
                <button id="tostadForErrorBtn" type="submit" class="btn finance-btn finance-btn-success w-100">
                    <i class="fa-solid fa-magnifying-glass me-2"></i>Analizar
                </button>
            </div>
        </div>
    </div>
</form>

<script>
    function updateValue(val) {
        document.getElementById('rangeValue').textContent = val;
    }
    
    function changeSpan() {
        document.getElementById('rangeValue').innerText = document.getElementById('myInput').value;
    }
    
    const observer = new MutationObserver(() => {
        document.getElementById('myInput').value = document.getElementById('rangeValue').innerText;
    });
    
    observer.observe(document.getElementById('rangeValue'), {childList: true, characterData: true, subtree: true});
</script>